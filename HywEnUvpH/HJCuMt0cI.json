{"_id":"HJCuMt0cI","title":"EC2 - EC2 USER DATA","dateCreated":1589707381527,"lastAccessed":"2020-05-17T09:23:01.531Z","lastUpdated":"2020-05-20T04:46:47.673Z","notebookId":"HywEnUvpH","body":{"blocks":[{"key":"ag6qs","text":"EC2 - EC2 USER DATA","type":"header-one","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"f9077","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3u8tq","text":"EC2 service is regional service.","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":32,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"5ibbn","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"844ln","text":"each region will have different EC2 instances.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fvk8e","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"be65i","text":"most popular","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a0u3h","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"10hdr","text":"It consitst of:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"24h2g","text":"Renting virual machines(EC2)","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a3uhd","text":"storing data on virtual machines(EBS)","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"20t63","text":"ELB","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2gpof","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cq4g8","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"rmn2","text":"When you first open EC2 by default there is one Security group","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":9,"length":6,"style":"BOLD"},{"offset":20,"length":4,"style":"BOLD"},{"offset":27,"length":8,"style":"BOLD"},{"offset":44,"length":18,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"8t4tr","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"97eq2","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7bttm","text":"Launch a EC2 instance:","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":22,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"9kac9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fcbnq","text":"1. Choose AMI:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9p26c","text":"    Free tier eligible","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5ket6","text":"    Amazon Linux 2 AMI (HVM), SSD Volume Type (64 bit)","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"74qk","text":"    ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cc59l","text":"    ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1nfr0","text":"2. Choose Instance Type","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"aq9it","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2h3rj","text":"    Types of instances:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4f2e6","text":"General Purpose Instances - T2, M5, M4, M3.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"amu87","text":"Computer Optimized Instances - C5, C4, C3.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cjrto","text":"Memory Optimized Instances - X1, R4, R3.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3km34","text":"Accelerated Computing Instances - P3, P2, G3, F1.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dg9rt","text":"Storage Optimized Instances - I3.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fg0vf","text":"Dense Storage Instances - D2.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d4tr6","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5qmht","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a9ffu","text":"3. Configure Instance","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5n5ko","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5lamd","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":0}],"data":{}},{"key":"bvvae","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bdl60","text":"    ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d0o4r","text":"4. Add Storage:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"au546","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"f0dgg","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":1}],"data":{}},{"key":"3921j","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"af93o","text":"5. Add Tags:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"620bv","text":"A tag consists of a case-sensitive key-value pair. For example, you could define a tag with key = Name and value = Webserver.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"aoj12","text":"A copy of a tag can be applied to volumes, instances or both.","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bmcop","text":"6. Configure Security Group:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ci4im","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"boc83","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1i00t","text":"","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"55bmj","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":2}],"data":{}},{"key":"1e5df","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7nfsh","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"btfpg","text":"7. Review:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5dspn","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7nkld","text":"Improve your instances' security. Your security group, my_first_security_group, is open to the world.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9f7lb","text":"because we used 0.0.0.0/0 as a source which means it can be accessed from internet.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a7un9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"basrh","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5tmqb","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"eqj2l","text":"A key pair consists of a public key that AWS stores, and a private key file that you store. Together, they allow you to connect to your instance securely. For Windows AMIs, the private key file is required to obtain the password used to log into your instance. For Linux AMIs, the private key file allows you to securely SSH into your instance.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a9bd9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c1j5e","text":"create a new key pair or import existing, this will give you access to Ec2 machine","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bcop2","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c72oo","text":"Note that when your instances are stopped:","type":"todo","depth":0,"inlineStyleRanges":[{"offset":0,"length":42,"style":"BOLD"}],"entityRanges":[],"data":{"checked":true}},{"key":"3fulo","text":"Any data on the ephemeral storage of your instances will be lost.","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":65,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"2mts7","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"rmg3","text":"Anything that is not stored on an EBS volume that is mounted to the instance will be lost.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3lf56","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"aj6fl","text":"Note that there is a difference between \"stop\" and \"terminate\". If you \"stop\" an instance that is backed by EBS then the information on the root volume will still be in the same state when you \"start\" the machine again. According to the documentation, \"By default, the root device volume and the other Amazon EBS volumes attached when you launch an Amazon EBS-backed instance are automatically deleted when the instance terminates\" but you can modify that via configuration.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"mbm2","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"elg7g","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"6jl8","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3ku1n","text":"EC2 USER DATA:","type":"header-two","depth":0,"inlineStyleRanges":[{"offset":0,"length":14,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"84mo5","text":"bootsrap means to only launch command when the machine starts and never again.","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":78,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"31o8k","text":"the more commands in ec2 userdata, the more time to initialise the instance","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":75,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"5eftl","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9qn9t","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fc5ib","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":3}],"data":{}},{"key":"kvc0","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4dfri","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8b7iv","text":"While configuring the instance, inside the configure instance details","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2rirr","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"e9tvi","text":"remember that Ec2 user data is automatically run using sudo command so we need not sudo su","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":83,"length":7,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"temk","text":"the first line will always be  #!/bin/bash","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":42,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"b04oa","text":"#!/bin/bash","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[{"offset":0,"length":11,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"9flvb","text":"yum update -y  #-y will auto say YES every time packages","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fneon","text":"yum install -y httpd.x86_64","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d3lh3","text":"systemctl start httpd.service","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"34oc","text":"systemctl enable httpd.service ","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"e7osu","text":"curl localhost:80","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"83dmn","text":"echo \"Hello there from $(hostname -f)\" > /var/www/html/index.html","type":"custom-code-block-bash","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1h6ju","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"hcs","text":" EC2 instance types:","type":"header-one","depth":0,"inlineStyleRanges":[{"offset":0,"length":20,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"91aoq","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dp053","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5sa9g","text":"","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4bvh1","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":4}],"data":{}},{"key":"ftesu","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5vft0","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dkpbg","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":5}],"data":{}},{"key":"9jfac","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"81j3o","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d7gk4","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7lj59","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bfgsd","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"6uhbl","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2pqbf","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ce77j","text":"IMPORTANT FOR EC2 in exam","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1f3p5","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":6}],"data":{}},{"key":"fqshc","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"aop2k","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5hcvp","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3fms9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2c1jm","text":" ","type":"atomic","depth":0,"inlineStyleRanges":[],"entityRanges":[{"offset":0,"length":1,"key":7}],"data":{}},{"key":"m7j5","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"42srs","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"etk8l","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2592i","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4nj00","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1apop","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ee4ck","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8ni7r","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"84iik","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"epm01","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"72ef","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ejnj2","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"6ek26","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2o9fk","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"n2it","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"6kir9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}}],"entityMap":{"0":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_BkImf5R98.PNG","width":100}},"1":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_rkBzQ5RqU.PNG","width":100}},"2":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_H1wkrqA9I.PNG","width":100}},"3":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_SJ8BtlJiI.PNG","width":100}},"4":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_rJ_G1WJiI.PNG","width":100}},"5":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_HkziJbys8.PNG","width":100}},"6":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_rJ1eEEziI.PNG","width":100}},"7":{"type":"image","mutability":"IMMUTABLE","data":{"src":"C:\\Users\\Gaurav Sharma\\Documents/medley/resources/HJCuMt0cI_HkxbVEGoU.PNG","width":100}}}},"tags":[]}
