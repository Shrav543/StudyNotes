{"_id":"SkkmU9R9I","title":"SSH to  Ec2 instance","dateCreated":1589712407015,"lastAccessed":"2020-05-17T10:46:47.015Z","lastUpdated":"2020-05-17T11:24:43.829Z","notebookId":"HywEnUvpH","body":{"blocks":[{"key":"ag6qs","text":"SSH to  Ec2 instance","type":"header-one","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2b521","text":"or alternatively we can use EC2 instance connect : from browser for any OS","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"d8u2c","text":"works for mac, linux and windows 10 or above","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"10q8n","text":"use Putty for windows 10 if not Ec2 instance connect","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"2vv71","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dp1ed","text":"since we used a linux machine for our ec2 instance and allowed SSH from anywhere 0/0.0.0.0","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fr59h","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"712dg","text":"we can ssh to login to the machine using the ec2 credential file (.pem) (Privacy Enhanced Mail )","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":73,"length":23,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"9b7es","text":"go to poweshell /cmd","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4qns8","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8ul55","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7qoit","text":"type ssh","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":5,"length":3,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"cd229","text":"usage: ssh [-46AaCfGgKkMNnqsTtVvXxYy] [-B bind_interface]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"f2u6r","text":"           [-b bind_address] [-c cipher_spec] [-D [bind_address:]port]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cgb6t","text":"           [-E log_file] [-e escape_char] [-F configfile] [-I pkcs11]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"frm8c","text":"           [-i identity_file] [-J [user@]host[:port]] [-L address]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fd0mg","text":"           [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"qqd3","text":"           [-Q query_option] [-R address] [-S ctl_path] [-W host:port]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1jq4k","text":"           [-w local_tun[:remote_tun]] destination [command]","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"728vd","text":" ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ada75","text":"if ssh is not installed use Putty:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5poc7","text":"here you need to provide the location of .pem file","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9ekc3","text":"-i for identity","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"6gv8r","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8002q","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"11aes","text":"ssh -i .pemfilepath ec2-user@ipv4ofec2 instance","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":47,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"er1p8","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"493kj","text":"ssh -i ec2practice.pem ec2-user@13.233.113.213","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5bmmf","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"22eti","text":"select yes # for the first time and then after your computer will be trusted ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"82qfp","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c4nv3","text":"there would be an warning of unprotected private key:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c7smf","text":"we can resolve that on linux by chmod","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":22,"length":15,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"gdb1","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bl13q","text":"chmod 0400 ec2practice.pem","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":26,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"34lup","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"akr7t","text":"with 0400 only User/owner can read, can't write and can't execute","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":65,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"dhjce","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3ncaj","text":"but for windows:","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":16,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"a76f9","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8j3ac","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9urut","text":"open properties of the .pem file","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"64c8g","text":"go to security -> advance","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dn7ji","text":"make ur self owner","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"djj1b","text":"and then remove all other components having inheritance","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"889ea","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"4n5ij","text":"for error: go to Enable Inheritance and select convert option","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"b733e","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"c8vkv","text":"now you will be able to delete all the inherted users.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"a7kt2","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5a9fa","text":"now make sure that you have full control and if not edit the permission add youself and give full access.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"aod8n","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fnjkd","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1290o","text":"now again run the command :","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"3775q","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"34hur","text":"ssh -i ec2practice.pem ec2-user@13.233.113.213","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":46,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"3v0ba","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"f0nuh","text":"you will be able to login to Ec2 instance ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9ntpr","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"cn6vd","text":"run : whoami","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":6,"length":6,"style":"BOLD"}],"entityRanges":[],"data":{}},{"key":"bl8jl","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"e228d","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"ackat","text":"Open an SSH client. (find out how to connect using PuTTY)","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"b3b9k","text":"Locate your private key file (ec2practice.pem). The wizard automatically detects the key you used to launch the instance.","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"1gft","text":"Your key must not be publicly viewable for SSH to work. Use this command if needed:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8rm5n","text":"chmod 400 ec2practice.pem","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"9rtj3","text":"Connect to your instance using its Public DNS:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"7132i","text":"ec2-13-233-113-213.ap-south-1.compute.amazonaws.com","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bvhht","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"5khsb","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"18qqr","text":"EXAMPLE:","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"dnplc","text":"ssh -i \"ec2practice.pem\" ec2-user@ec2-13-233-113-213.ap-south-1.compute.amazonaws.com","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}}],"entityMap":{}},"tags":[]}
